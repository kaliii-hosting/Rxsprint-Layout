/* Global Mobile Responsiveness Fix */

/* Reset aggressive global styles */
* {
  box-sizing: border-box;
}

/* Ensure proper viewport behavior - but NOT when Board page is active */
html:not(:has(.board-page)) {
  width: 100%;
  overflow-x: hidden;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

body:not(:has(.board-page)) {
  width: 100%;
  margin: 0;
  padding: 0;
  overflow-x: hidden;
  overflow-y: auto;
  position: relative;
}

/* Fix root container */
#root {
  width: 100%;
  min-height: 100vh;
  overflow-x: hidden;
  position: relative;
}

/* Fix content container */
.content {
  width: 100%;
  overflow-x: hidden;
  position: relative;
}

/* Mobile-specific fixes */
@media (max-width: 768px) {
  /* Prevent horizontal overflow without breaking layouts - except for Board page */
  html:not(:has(.board-page)), 
  body:not(:has(.board-page)) {
    width: 100%;
    overflow-x: hidden;
    overflow-y: auto;
  }
  
  /* Fix page containers - except Board page */
  .page-container:not(.board-page) {
    width: 100%;
    min-height: 100vh;
    margin: 0;
    padding: 0;
    position: relative;
    display: flex;
    flex-direction: column;
    overflow-x: hidden;
  }
  
  /* Fix toolbar cutoff */
  .board-toolbar {
    width: 100%;
    overflow-x: auto;
    overflow-y: hidden;
    -webkit-overflow-scrolling: touch;
    position: relative;
    z-index: 100;
    flex-shrink: 0;
  }
  
  /* Prevent toolbar content from being cut off */
  .board-toolbar > * {
    flex-shrink: 0;
  }
  
  /* Fix calculator page specific issues */
  .calculator-page {
    width: 100%;
    overflow-x: hidden;
    position: relative;
  }
  
  .calculator-content {
    width: 100%;
    overflow-x: hidden;
    padding: 0;
    margin: 0;
  }
  
  .calculator-dashboard {
    width: 100%;
    max-width: 100%;
    margin: 0 auto;
    padding: 0.75rem;
    box-sizing: border-box;
  }
  
  /* Fix workflow page */
  .workflow-page {
    width: 100%;
    overflow-x: hidden;
  }
  
  /* Fix medications page */
  .medications-page {
    width: 100%;
    overflow-x: hidden;
  }
  
  /* Fix board page */
  .board-page {
    width: 100%;
    overflow-x: hidden;
    position: relative;
  }
  
  /* Fix calendar page */
  .calendar-page {
    width: 100%;
    overflow-x: hidden;
  }
  
  /* Fix analyzer page */
  .analyzer-page {
    width: 100%;
    overflow-x: hidden;
  }
  
  /* Ensure all page content fits within viewport */
  [class*="-page"] {
    width: 100%;
    overflow-x: hidden;
  }
  
  /* Fix any elements that might cause horizontal scroll */
  pre, code, table {
    max-width: 100%;
    overflow-x: auto;
  }
  
  /* Ensure images don't break layout */
  img {
    max-width: 100%;
    height: auto;
  }
  
  /* Fix any absolutely positioned elements */
  .modal-overlay,
  .drawer,
  .popup {
    max-width: 100vw;
  }
}

/* Extra small devices */
@media (max-width: 480px) {
  /* Further mobile optimizations */
  .board-toolbar {
    padding: 0.5rem;
    gap: 0.5rem;
  }
  
  .calculator-dashboard {
    padding: 0.5rem;
  }
  
  /* Ensure touch-friendly tap targets */
  button,
  a,
  .clickable {
    min-height: 44px;
    min-width: 44px;
  }
}

/* Fix for iOS Safari */
@supports (-webkit-touch-callout: none) {
  body {
    height: -webkit-fill-available;
  }
  
  .page-container {
    min-height: -webkit-fill-available;
  }
}

/* Ensure smooth scrolling */
* {
  scroll-behavior: smooth;
}

/* Prevent text selection issues on mobile */
@media (max-width: 768px) {
  * {
    -webkit-tap-highlight-color: transparent;
  }
}