/* WorkflowTableEnhancements.css - Full table display and sticky headers */

/* Remove scroll containers and show full tables in subsections */
.subsection-content .table-scroll-wrapper,
.subsection-card .table-scroll-wrapper,
.workflow-content .table-scroll-wrapper {
  max-height: none !important;
  height: auto !important;
  overflow: visible !important;
  padding: 0 !important;
}

/* Ensure table container shows full content */
.subsection-content .table-container,
.subsection-card .table-container,
.workflow-content .table-container {
  overflow: visible !important;
  max-height: none !important;
  height: auto !important;
}

/* Make table wrapper position relative for sticky headers */
.subsection-content .table-scroll-wrapper,
.subsection-content .modal-table-wrapper,
.subsection-content .table-container {
  position: relative !important;
}

/* Sticky first row (header) for all pasted Excel tables */
.subsection-content table thead tr:first-child,
.subsection-content table tbody tr:first-child,
.subsection-content .table-scroll-wrapper table tr:first-child,
.subsection-content .modal-table-wrapper table tr:first-child {
  position: sticky !important;
  top: 0 !important;
  z-index: 100 !important;
  background: var(--bg-primary, #ffffff) !important;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
}

/* Ensure first row cells have proper background */
.subsection-content table tr:first-child th,
.subsection-content table tr:first-child td,
.subsection-content .table-scroll-wrapper table tr:first-child th,
.subsection-content .table-scroll-wrapper table tr:first-child td,
.subsection-content .modal-table-wrapper table tr:first-child th,
.subsection-content .modal-table-wrapper table tr:first-child td {
  background: linear-gradient(to bottom, 
    rgba(255, 105, 0, 0.08) 0%, 
    rgba(255, 105, 0, 0.05) 100%) !important;
  font-weight: 600 !important;
  border-bottom: 2px solid rgba(255, 105, 0, 0.3) !important;
  padding: 12px !important;
  position: relative !important;
}

/* Style for tables that already have thead */
.subsection-content table thead,
.subsection-content .table-scroll-wrapper table thead,
.subsection-content .modal-table-wrapper table thead {
  position: sticky !important;
  top: 0 !important;
  z-index: 100 !important;
}

.subsection-content table thead th,
.subsection-content .table-scroll-wrapper table thead th,
.subsection-content .modal-table-wrapper table thead th {
  background: linear-gradient(to bottom, 
    rgba(255, 105, 0, 0.08) 0%, 
    rgba(255, 105, 0, 0.05) 100%) !important;
  font-weight: 600 !important;
  border-bottom: 2px solid rgba(255, 105, 0, 0.3) !important;
  padding: 12px !important;
  position: relative !important;
}

/* Remove table resize handles since tables are full height now */
.subsection-content .table-resize-handle,
.subsection-card .table-resize-handle {
  display: none !important;
}

/* Ensure tables take full width */
.subsection-content table,
.subsection-content .table-scroll-wrapper table,
.subsection-content .modal-table-wrapper table {
  width: 100% !important;
  table-layout: auto !important;
}

/* Improve table visibility */
.subsection-content table,
.subsection-content .table-scroll-wrapper table,
.subsection-content .modal-table-wrapper table {
  border-collapse: collapse !important;
  border: 1px solid var(--border-color, #e5e7eb) !important;
  margin: 1rem 0 !important;
}

/* Standard cell styling */
.subsection-content table td,
.subsection-content .table-scroll-wrapper table td,
.subsection-content .modal-table-wrapper table td {
  padding: 10px 12px !important;
  border: 1px solid var(--border-color, #e5e7eb) !important;
  vertical-align: top !important;
}

/* Zebra striping for better readability */
.subsection-content table tbody tr:nth-child(even):not(:first-child),
.subsection-content .table-scroll-wrapper table tbody tr:nth-child(even):not(:first-child),
.subsection-content .modal-table-wrapper table tbody tr:nth-child(even):not(:first-child) {
  background: rgba(0, 0, 0, 0.02) !important;
}

/* Hover effect for rows (excluding sticky header) */
.subsection-content table tbody tr:not(:first-child):hover,
.subsection-content .table-scroll-wrapper table tbody tr:not(:first-child):hover,
.subsection-content .modal-table-wrapper table tbody tr:not(:first-child):hover {
  background: rgba(255, 105, 0, 0.05) !important;
}

/* Modal table specific styles */
.modal-table-container {
  width: 100% !important;
  margin: 1rem 0 !important;
}

.modal-table-wrapper {
  width: 100% !important;
  overflow: visible !important;
  max-height: none !important;
  position: relative !important;
}

/* Ensure decision tables also follow the same rules */
.decision-table-container {
  overflow: visible !important;
  max-height: none !important;
}

.decision-table {
  width: 100% !important;
}

.decision-table thead tr,
.decision-table tbody tr:first-child {
  position: sticky !important;
  top: 0 !important;
  z-index: 100 !important;
  background: var(--button-bg, #f3f4f6) !important;
}

/* Dark theme support */
[data-theme="dark"] .subsection-content table tr:first-child th,
[data-theme="dark"] .subsection-content table tr:first-child td,
[data-theme="dark"] .subsection-content table thead th {
  background: linear-gradient(to bottom, 
    rgba(255, 105, 0, 0.15) 0%, 
    rgba(255, 105, 0, 0.08) 100%) !important;
  color: var(--text-primary) !important;
}

[data-theme="dark"] .subsection-content table tbody tr:nth-child(even):not(:first-child) {
  background: rgba(255, 255, 255, 0.02) !important;
}

/* Ensure proper scrolling behavior for subsection when tables are large */
.subsection-content {
  overflow-x: auto !important;
  overflow-y: visible !important;
}

/* Custom scrollbar for horizontal scrolling if needed */
.subsection-content::-webkit-scrollbar {
  height: 10px;
}

.subsection-content::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.05);
  border-radius: 5px;
}

.subsection-content::-webkit-scrollbar-thumb {
  background: rgba(255, 105, 0, 0.3);
  border-radius: 5px;
}

.subsection-content::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 105, 0, 0.5);
}

/* Ensure Excel pasted tables inherit proper styling */
.subsection-content table[style*="border-collapse"],
.table-scroll-wrapper table[style*="border-collapse"],
.modal-table-wrapper table[style*="border-collapse"] {
  /* Override inline styles from Excel paste */
  border-collapse: collapse !important;
}

/* Fix for OneNote pasted tables */
.subsection-content table[data-id],
.table-scroll-wrapper table[data-id],
.modal-table-wrapper table[data-id] {
  width: 100% !important;
  table-layout: auto !important;
}

/* Ensure proper print display */
@media print {
  .subsection-content table tr:first-child,
  .subsection-content table thead {
    position: static !important;
  }
  
  .subsection-content .table-scroll-wrapper,
  .subsection-content .table-container {
    overflow: visible !important;
    max-height: none !important;
  }
}

/* Apply to existing tables immediately upon load */
.subsection-content table,
.workflow-content table,
.decision-table,
.pump-table {
  /* Force recalculation of table layout */
  display: table !important;
}

/* Ensure mixed content tables display properly */
.mixed-content-container table {
  width: 100% !important;
  margin: 1rem 0 !important;
}

.mixed-content-container table tr:first-child {
  position: sticky !important;
  top: 0 !important;
  z-index: 100 !important;
  background: linear-gradient(to bottom, 
    rgba(255, 105, 0, 0.08) 0%, 
    rgba(255, 105, 0, 0.05) 100%) !important;
}

/* Override any conflicting max-height settings */
.expanded .table-scroll-wrapper,
.expanded .table-container,
.expanded .modal-table-wrapper {
  max-height: none !important;
  height: auto !important;
}